{"version":3,"file":"dist/markerplayer.js.map","sources":["../src/index.ts"],"names":["MarkerPlayer","Marker","extend","statics","notStartedState","endedState","pausedState","runState","options","autostart","loop","initialize","points","duration","prototype","call","this","latlng","_points","Array","_totDuration","reduce","acc","curr","_durations","let","sum","_accDurations","map","v","_createDurations","_currentDuration","_currentIndex","_state","_startTime","_startTimeStamp","_pauseStartTime","_animId","_animRequested","_currentLine","_stations","_progChanged","isRunning","isEnded","isStarted","isPaused","start","resume","_loadLine","_startAnimation","fire","pause","Date","now","_stopAnimation","Object","assign","getLatLng","stop","elapsedTime","setLatLng","progress","getProgress","addPoint","point","push","moveTo","addStation","pointIndex","length","onAdd","_resumeAnimation","onRemove","timeFormat","ratio","percnt","indx","elapsed","p1","p2","distanceTo","latLng","Math","round","setProgress","percentage","t","p","accDur","i","len","_animate","setDuration","newDuration","lastIndex","distances","totalDistance","distance","ratioDuration","durations","accDurations","_interpolatePosition","r","lat","lng","Util","requestAnimFrame","timestamp","cancelAnimFrame","_updatePosition","index","slice","_updateLine","lineIndex","lineDuration","stationDuration","undefined","noRequestAnim"],"mappings":"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"}